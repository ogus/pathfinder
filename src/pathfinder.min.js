!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Pathfinder=e()}(this,function(){"use strict";var f=function(){this.data=[],this.compare=function(t,e){return e.score-t.score}};f.prototype={_up:function(t){for(var e=this.data[t],n=null,s=null;0<t&&(n=t-1>>1,s=this.data[n],!(this.compare(e,s)<0));)this.data[t]=s,t=n;this.data[t]=e},_down:function(t){for(var e=this.data.length>>1,n=this.data[t],s=null,i=null,r=null;t<e&&(i=(s=1+(t<<1))+1,r=this.data[s],i<this.data.length&&0<this.compare(this.data[i],r)&&(s=i,r=this.data[i]),!(this.compare(r,n)<0));)this.data[t]=r,t=s;this.data[t]=n},push:function(t,e){e=void 0!==e?e:0,this.data.push({node:t,score:e}),this._up(this.data.length-1)},pop:function(){if(0==this.data.length)return null;var t=this.data[0],e=this.data.pop();return 0<this.data.length&&(this.data[0]=e,this._down(0)),t.node},length:function(){return this.data.length}};var l=function(){this.nodes=[],this.costs={},this.links={}};l.prototype={start:function(t){this.nodes.push(t),this.links[0]=null,this.costs[0]=0},link:function(t,e,n){this.contains(t)||this.nodes.push(t),this.contains(e)||this.nodes.push(e);var s=this.nodes.indexOf(e);this.links[s]=this.nodes.indexOf(t),this.costs[s]=void 0!==n?n:0},cost:function(t){return this.contains(t)?this.costs[this.nodes.indexOf(t)]:0},contains:function(t){return-1<this.nodes.indexOf(t)},export:function(t){var e=[];if(void 0!==t)for(var n=this.nodes.indexOf(t);0<n;)e.push(this.nodes[n]),n=this.links[n];return e.push(this.nodes[0]),e.reverse(),e}};var t=function(){this.nodes=[],this.edges={}};function r(t,e,n){var s=new l;s.start(e);var i=new Array;i.push(e);for(var r=null,h=null,o=null;0<i.length;){if((r=i.shift())===n)return s.export(n);o=t.getAdjacentNodes(r);for(var a=0;a<o.length;a++)h=o[a],s.contains(h)||(s.link(r,h),i.push(h))}return s.export(r)}function h(t,e,n,s){var i=new l;i.start(e);var r=new f;r.push(e);for(var h=null,o=null,a=null;0<r.length();){if((h=r.pop())===n)return i.export(n);a=t.getAdjacentNodes(h);for(var d=0;d<a.length;d++)if(o=a[d],!i.contains(o)){var u=s(o,n);i.link(h,o),r.push(o,u)}}return i.export(h)}function o(t,e,n){var s=new l;s.start(e);var i=new f;i.push(e);for(var r=null,h=null,o=null,a=0;0<i.length();){if((r=i.pop())===n)return s.export(n);o=t.getAdjacentNodes(r);for(var d=0;d<o.length;d++)h=o[d],a=s.cost(r)+t.getCost(r,h),(!s.contains(h)||a<s.cost(h))&&(s.link(r,h,a),i.push(h,a))}return s.export(r)}function a(t,e,n,s){var i=new l;i.start(e);var r=new f;r.push(e);for(var h=null,o=null,a=null,d=0;0<r.length();){if((h=r.pop())===n)return i.export(n);a=t.getAdjacentNodes(h);for(var u=0;u<a.length;u++)if(o=a[u],d=i.cost(h)+t.getCost(h,o),!i.contains(o)||d<i.cost(o)){var c=s(o,n);i.link(h,o,d),r.push(o,d+c)}}return i.export(h)}return t.prototype={get:function(t){for(var e=0;e<this.nodes.length;e++)if(t(this.nodes[e]))return this.nodes[e];return null},getNodeId:function(t){return this.nodes.indexOf(t)},hasNode:function(t){return-1<this.nodes.indexOf(t)},addNode:function(t){this.hasNode(t)||(this.nodes.push(t),this.edges[this.nodes.length-1]={})},addEdge:function(t,e,n){n=void 0!==n?n:0,this.addNode(t),this.addNode(e),this.edges[this.getNodeId(t)][this.getNodeId(e)]=n,this.edges[this.getNodeId(e)][this.getNodeId(t)]=n},addDirectedEdge:function(t,e,n){n=void 0!==n?n:0,this.addNode(t),this.addNode(e),this.edges[this.getNodeId(t)][this.getNodeId(e)]=n},getCost:function(t,e){if(this.hasNode(t)&&this.hasNode(e)){var n=this.getNodeId(t),s=this.getNodeId(e);if(this.edges[n].hasOwnProperty(s))return this.edges[n][s]}return null},getAdjacentNodes:function(t){if(this.hasNode(t)){for(var e=this.getNodeId(t),n=Object.keys(this.edges[e]),s=[],i=0;i<n.length;i++)s.push(this.nodes[n[i]]);return s}return null},clear:function(){this.nodes=[],this.edges={}}},{searchBFS:function(t,e,n){return r(t,e,n)},searchGreedyBFS:function(t,e,n,s){return h(t,e,n,s)},searchDijkstra:function(t,e,n){return o(t,e,n)},searchAStar:function(t,e,n,s){return a(t,e,n,s)},search:function(t,e,n,s,i){switch(t){case"bfs":return r(e,n,s);case"greedy-bfs":return h(e,n,s,i);case"dijkstra":return o(e,n,s);case"astar":return a(e,n,s,i);default:return null}},Instance:function(t,e){this.graph=t,this.heuristic=e,this.seachBFS=function(t,e){return r(this.graph,t,e)},this.searchGreedyBFS=function(t,e){return h(this.graph,t,e,this.heuristic)},this.searchDijkstra=function(t,e){return o(this.graph,t,e)},this.searchAStar=function(t,e,n){return a(this.graph,t,e,this.heuristic)},this.search=function(t,e,n){switch(t){case"bfs":return r(this.graph,e,n);case"greedy-bfs":return h(this.graph,e,n,this.heuristic);case"dijkstra":return o(this.graph,e,n);case"astar":return a(this.graph,e,n,this.heuristic);default:return null}}},Graph:t}});